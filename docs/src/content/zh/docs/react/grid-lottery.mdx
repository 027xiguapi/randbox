---
title: 'GridLottery - ä¹å®«æ ¼æŠ½å¥–'
description: 'åŸºäºCanvasçš„ä¹å®«æ ¼æŠ½å¥–ç»„ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰å¥–å“ã€æƒé‡é…ç½®å’Œæµç•…çš„æŠ½å¥–åŠ¨ç”»'
---

# GridLottery - ä¹å®«æ ¼æŠ½å¥–

`GridLottery` æ˜¯ä¸€ä¸ªåŸºäºCanvasçš„ä¹å®«æ ¼æŠ½å¥–ç»„ä»¶ï¼Œæä¾›ç»å…¸çš„è½¬ç›˜æŠ½å¥–ä½“éªŒã€‚æ”¯æŒè‡ªå®šä¹‰å¥–å“ã€æƒé‡é…ç½®ã€åŠ¨ç”»æ•ˆæœç­‰ä¸°å¯ŒåŠŸèƒ½ã€‚

## ğŸ“¦ å¯¼å…¥

```typescript
import { GridLottery } from '@randbox/react';
import type { GridLotteryProps, GridLotteryResult } from '@randbox/react';
```

## ğŸ¯ ç±»å‹å®šä¹‰

### GridLotteryProps

```typescript
interface GridLotteryProps {
  // å¿…éœ€å±æ€§
  prizes: string[];                               // å¥–å“åˆ—è¡¨

  // å¯é€‰å±æ€§
  weights?: number[];                             // å¥–å“æƒé‡
  gridSize?: number;                              // ç½‘æ ¼å¤§å°ï¼Œé»˜è®¤9
  animationDuration?: number;                     // åŠ¨ç”»æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤3000
  buttonText?: string;                            // æŒ‰é’®æ–‡å­—ï¼Œé»˜è®¤"å¼€å§‹æŠ½å¥–"

  // åŸºç¡€å±æ€§ï¼ˆç»§æ‰¿è‡ªBaseGamePropsï¼‰
  className?: string;                             // CSSç±»å
  style?: React.CSSProperties;                   // å†…è”æ ·å¼
  disabled?: boolean;                             // æ˜¯å¦ç¦ç”¨

  // å›è°ƒå‡½æ•°
  onGameStart?: () => void;                      // æ¸¸æˆå¼€å§‹å›è°ƒ
  onGameEnd?: (result: GridLotteryResult) => void; // æ¸¸æˆç»“æŸå›è°ƒ
  onResult?: (result: GridLotteryResult) => void; // ç»“æœå›è°ƒ
}
```

### GridLotteryResult

```typescript
interface GridLotteryResult {
  position: number;        // ä¸­å¥–ä½ç½®ç´¢å¼•ï¼ˆ0-8ï¼‰
  prize: string;           // ä¸­å¥–å¥–å“
  animation: number[];     // åŠ¨ç”»è·¯å¾„æ•°ç»„
}
```

## ğŸš€ åŸºç¡€ç”¨æ³•

```typescript
import React from 'react';
import { GridLottery } from '@randbox/react';

function BasicGridLottery() {
  const prizes = [
    'ä¸€ç­‰å¥–', 'äºŒç­‰å¥–', 'ä¸‰ç­‰å¥–',
    'å››ç­‰å¥–', 'äº”ç­‰å¥–', 'å…­ç­‰å¥–',
    'ä¸ƒç­‰å¥–', 'å…«ç­‰å¥–', 'è°¢è°¢å‚ä¸'
  ];

  const handleResult = (result) => {
    console.log('æŠ½å¥–ç»“æœ:', result);
  };

  return (
    <GridLottery
      prizes={prizes}
      onResult={handleResult}
    />
  );
}
```

## ğŸ¯ é«˜çº§ç”¨æ³•

### å¸¦æƒé‡çš„æŠ½å¥–

```typescript
function WeightedGridLottery() {
  const prizes = [
    'iPhone 15 Pro', 'iPad', 'AirPods',
    'Apple Watch', 'ä¼˜æƒ åˆ¸', 'ç§¯åˆ†',
    'ä»£é‡‘åˆ¸', 'çº¢åŒ…', 'è°¢è°¢å‚ä¸'
  ];

  // æƒé‡è¶Šé«˜ï¼Œä¸­å¥–æ¦‚ç‡è¶Šå¤§
  const weights = [1, 3, 5, 8, 15, 20, 25, 20, 3];

  return (
    <GridLottery
      prizes={prizes}
      weights={weights}
      animationDuration={3000}
      onResult={(result) => {
        if (result.prize !== 'è°¢è°¢å‚ä¸') {
          alert(`æ­å–œæ‚¨ä¸­å¥–äº†ï¼š${result.prize}ï¼`);
        }
      }}
    />
  );
}
```

### è‡ªå®šä¹‰ç½‘æ ¼å¤§å°

```typescript
function CustomGridLottery() {
  // 4x4ç½‘æ ¼ï¼Œå…±16ä¸ªå¥–å“
  const prizes = Array.from({ length: 16 }, (_, i) => `å¥–å“${i + 1}`);

  return (
    <GridLottery
      prizes={prizes}
      gridSize={16}
      onResult={(result) => console.log(result)}
    />
  );
}
```

### å®Œæ•´é…ç½®ç¤ºä¾‹

```typescript
function FullConfigGridLottery() {
  const [isDrawing, setIsDrawing] = useState(false);
  const [results, setResults] = useState([]);

  const prizes = [
    'ğŸ è¶…çº§å¤§å¥–', 'ğŸ† ä¸€ç­‰å¥–', 'ğŸ’ äºŒç­‰å¥–',
    'â­ ä¸‰ç­‰å¥–', 'ğŸ¯ å››ç­‰å¥–', 'ğŸª äº”ç­‰å¥–',
    'ğŸ¨ å…­ç­‰å¥–', 'ğŸ­ ä¸ƒç­‰å¥–', 'ğŸŠ è°¢è°¢å‚ä¸'
  ];

  const weights = [1, 2, 5, 10, 15, 20, 25, 20, 2];

  const handleGameStart = () => {
    setIsDrawing(true);
    console.log('å¼€å§‹æŠ½å¥–...');
  };

  const handleGameEnd = (result) => {
    setIsDrawing(false);
    setResults(prev => [result, ...prev.slice(0, 4)]);
    console.log('æŠ½å¥–ç»“æŸ:', result);
  };

  return (
    <div style={{ padding: '20px' }}>
      <GridLottery
        prizes={prizes}
        weights={weights}
        gridSize={9}
        animationDuration={2500}
        buttonText={isDrawing ? 'æŠ½å¥–ä¸­...' : 'å¼€å§‹æŠ½å¥–'}
        className="my-lottery"
        style={{ margin: '20px auto' }}
        disabled={isDrawing}
        onGameStart={handleGameStart}
        onGameEnd={handleGameEnd}
        onResult={(result) => {
          console.log('å®æ—¶ç»“æœ:', result);
        }}
      />

      {/* å†å²è®°å½• */}
      {results.length > 0 && (
        <div style={{ marginTop: '20px' }}>
          <h3>æœ€è¿‘æŠ½å¥–è®°å½•ï¼š</h3>
          {results.map((result, index) => (
            <div key={index} style={{ padding: '5px', backgroundColor: '#f5f5f5', margin: '5px 0' }}>
              ç¬¬ {result.position + 1} ä½ï¼š{result.prize}
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
```

## ğŸ“‹ APIå‚è€ƒ

### GridLotteryProps

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `prizes` | `string[]` | **å¿…éœ€** | å¥–å“åˆ—è¡¨ï¼Œæ•°ç»„é•¿åº¦åº”åŒ¹é…gridSize |
| `weights` | `number[]` | `undefined` | æƒé‡æ•°ç»„ï¼Œæ§åˆ¶æ¯ä¸ªå¥–å“çš„ä¸­å¥–æ¦‚ç‡ |
| `gridSize` | `number` | `9` | ç½‘æ ¼å¤§å°ï¼ˆå¥–å“æ•°é‡ï¼‰ |
| `animationDuration` | `number` | `3000` | åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |
| `buttonText` | `string` | `'å¼€å§‹æŠ½å¥–'` | æŠ½å¥–æŒ‰é’®æ–‡å­— |
| `onResult` | `(result: GridLotteryResult) => void` | `undefined` | æŠ½å¥–ç»“æœå›è°ƒ |

### ç»§æ‰¿çš„BaseGameProps

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `className` | `string` | `''` | CSSç±»å |
| `style` | `React.CSSProperties` | `{}` | å†…è”æ ·å¼ |
| `disabled` | `boolean` | `false` | æ˜¯å¦ç¦ç”¨ |
| `onGameStart` | `() => void` | `undefined` | æ¸¸æˆå¼€å§‹å›è°ƒ |
| `onGameEnd` | `(result: GridLotteryResult) => void` | `undefined` | æ¸¸æˆç»“æŸå›è°ƒ |

### GridLotteryResult ç»“æ„

```typescript
{
  position: 0,           // ä¸­å¥–ä½ç½®ç´¢å¼•ï¼ˆ0-8ï¼‰
  prize: "iPhone 15",   // ä¸­å¥–å¥–å“
  animation: [1, 2, 3]  // åŠ¨ç”»è·¯å¾„æ•°ç»„
}
```

## ğŸ¨ æ ·å¼å®šåˆ¶

### å®¹å™¨æ ·å¼

```css
.my-lottery {
  border: 3px solid #ff6b6b;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
}

.my-lottery:hover {
  transform: translateY(-2px);
  transition: transform 0.3s ease;
}
```

### å“åº”å¼è®¾è®¡

```typescript
function ResponsiveGridLottery() {
  const [containerSize, setContainerSize] = useState({ width: 400, height: 400 });

  useEffect(() => {
    const updateSize = () => {
      const width = Math.min(window.innerWidth - 40, 500);
      setContainerSize({ width, height: width });
    };

    updateSize();
    window.addEventListener('resize', updateSize);
    return () => window.removeEventListener('resize', updateSize);
  }, []);

  return (
    <div style={{ width: containerSize.width, height: containerSize.height }}>
      <GridLottery
        prizes={['å¥–å“1', 'å¥–å“2', 'å¥–å“3', 'å¥–å“4', 'å¥–å“5', 'å¥–å“6', 'å¥–å“7', 'å¥–å“8', 'è°¢è°¢å‚ä¸']}
      />
    </div>
  );
}
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### åŠ¨æ€æ›´æ–°å¥–å“

```typescript
function DynamicGridLottery() {
  const [prizes, setPrizes] = useState([
    'å¥–å“A', 'å¥–å“B', 'å¥–å“C',
    'å¥–å“D', 'å¥–å“E', 'å¥–å“F',
    'å¥–å“G', 'å¥–å“H', 'è°¢è°¢å‚ä¸'
  ]);

  const updatePrizes = () => {
    const newPrizes = prizes.map((prize, index) =>
      index === 0 ? `æ–°å¥–å“${Date.now()}` : prize
    );
    setPrizes(newPrizes);
  };

  return (
    <div>
      <button onClick={updatePrizes}>æ›´æ–°å¥–å“</button>
      <GridLottery
        prizes={prizes}
        onResult={(result) => console.log('ä¸­å¥–:', result.prize)}
      />
    </div>
  );
}
```

### æŠ½å¥–æ¬¡æ•°é™åˆ¶

```typescript
function LimitedGridLottery() {
  const [remainingTries, setRemainingTries] = useState(3);
  const [canDraw, setCanDraw] = useState(true);

  const handleGameStart = () => {
    if (remainingTries <= 0) {
      setCanDraw(false);
      return;
    }
  };

  const handleGameEnd = (result) => {
    setRemainingTries(prev => prev - 1);
    if (remainingTries <= 1) {
      setCanDraw(false);
    }
  };

  return (
    <div>
      <p>å‰©ä½™æŠ½å¥–æ¬¡æ•°ï¼š{remainingTries}</p>
      <GridLottery
        prizes={['å¤§å¥–', 'å°å¥–', 'è°¢è°¢å‚ä¸', 'å†æ¥ä¸€æ¬¡', 'ä¼˜æƒ åˆ¸', 'ç§¯åˆ†', 'çº¢åŒ…', 'ç¤¼å“', 'ç©ºå¥–']}
        disabled={!canDraw}
        buttonText={canDraw ? 'å¼€å§‹æŠ½å¥–' : 'ä»Šæ—¥æŠ½å¥–å·²ç”¨å®Œ'}
        onGameStart={handleGameStart}
        onGameEnd={handleGameEnd}
      />
    </div>
  );
}
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æƒé‡é…ç½®å»ºè®®

```typescript
// åˆç†çš„æƒé‡åˆ†é…
const prizes = ['ç‰¹ç­‰å¥–', 'ä¸€ç­‰å¥–', 'äºŒç­‰å¥–', 'ä¸‰ç­‰å¥–', 'ä¼˜æƒ åˆ¸', 'ç§¯åˆ†', 'ä»£é‡‘åˆ¸', 'çº¢åŒ…', 'è°¢è°¢å‚ä¸'];
const weights = [1, 3, 8, 15, 20, 25, 20, 5, 3]; // æ€»å’Œä¸º100ï¼Œä¾¿äºè®¡ç®—æ¦‚ç‡
```

### 2. é”™è¯¯å¤„ç†

```typescript
function SafeGridLottery() {
  const [error, setError] = useState(null);

  const prizes = ['å¥–å“1', 'å¥–å“2', 'å¥–å“3', 'å¥–å“4', 'å¥–å“5', 'å¥–å“6', 'å¥–å“7', 'å¥–å“8', 'è°¢è°¢å‚ä¸'];
  const weights = [10, 10, 10, 10, 15, 15, 15, 10, 5];

  // éªŒè¯å¥–å“å’Œæƒé‡æ•°é‡åŒ¹é…
  if (prizes.length !== weights.length) {
    return <div>é…ç½®é”™è¯¯ï¼šå¥–å“æ•°é‡ä¸æƒé‡æ•°é‡ä¸åŒ¹é…</div>;
  }

  const handleError = (error) => {
    setError(error.message);
    console.error('æŠ½å¥–é”™è¯¯:', error);
  };

  return (
    <div>
      {error && <div style={{ color: 'red' }}>é”™è¯¯ï¼š{error}</div>}
      <GridLottery
        prizes={prizes}
        weights={weights}
        onResult={(result) => {
          setError(null);
          console.log('æŠ½å¥–æˆåŠŸ:', result);
        }}
      />
    </div>
  );
}
```

### 3. æ€§èƒ½ä¼˜åŒ–

```typescript
// ä½¿ç”¨useMemoä¼˜åŒ–å¤§æ•°æ®é‡
function OptimizedGridLottery() {
  const prizes = useMemo(() =>
    Array.from({ length: 100 }, (_, i) => `å¥–å“${i + 1}`)
  , []);

  const weights = useMemo(() =>
    Array.from({ length: 100 }, () => Math.random() * 10 + 1)
  , []);

  return (
    <GridLottery
      prizes={prizes.slice(0, 9)} // åªæ˜¾ç¤ºå‰9ä¸ª
      weights={weights.slice(0, 9)}
    />
  );
}
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæŠ½å¥–ç»“æœä¸å¤Ÿéšæœºï¼Ÿ
A: è¯·ç¡®ä¿å®‰è£…äº† `randbox` ä¾èµ–ï¼Œå®ƒæä¾›äº†é«˜è´¨é‡çš„éšæœºæ•°ç”Ÿæˆç®—æ³•ã€‚

### Q: å¦‚ä½•å®ç°å…¬å¹³çš„æŠ½å¥–ï¼Ÿ
A: ä½¿ç”¨æƒé‡é…ç½®ï¼Œç¡®ä¿æƒé‡æ€»å’Œåˆç†ï¼Œé¿å…æŸä¸ªå¥–å“æƒé‡è¿‡é«˜ã€‚

### Q: ç»„ä»¶å¤§å°å¦‚ä½•è‡ªé€‚åº”ï¼Ÿ
A: ç»„ä»¶ä¼šè‡ªåŠ¨é€‚åº”å®¹å™¨å¤§å°ï¼Œé€šè¿‡è®¾ç½®å®¹å™¨çš„å®½é«˜æ¥æ§åˆ¶ç»„ä»¶å°ºå¯¸ã€‚

### Q: å¯ä»¥ç¦ç”¨åŠ¨ç”»å—ï¼Ÿ
A: å°† `animationDuration` è®¾ç½®ä¸º 0 å¯ä»¥ç¦ç”¨åŠ¨ç”»æ•ˆæœã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [SlotMachine - æ»šåŠ¨æŠ½å¥–](/zh/docs/react/slot-machine)
- [ScratchCard - åˆ®åˆ®å¡](/zh/docs/react/scratch-card)
- [DiceGame - éª°å­æ¸¸æˆ](/zh/docs/react/dice-game)
- [RandBox æ ¸å¿ƒåº“](/zh/docs/basics)