---
title: 'SlotMachine - æ»šåŠ¨æŠ½å¥–'
description: 'åŸºäºCanvasçš„è€è™æœºé£æ ¼æ»šåŠ¨æŠ½å¥–ç»„ä»¶ï¼Œæ”¯æŒå¤šæ»šè½´ã€è‡ªå®šä¹‰ç¬¦å·å’Œä¸­å¥–è§„åˆ™é…ç½®'
---

# SlotMachine - æ»šåŠ¨æŠ½å¥–

`SlotMachine` æ˜¯ä¸€ä¸ªåŸºäºCanvasçš„è€è™æœºé£æ ¼æ»šåŠ¨æŠ½å¥–ç»„ä»¶ï¼Œæä¾›å¤šæ»šè½´åŒæ­¥æˆ–å¼‚æ­¥æ»šåŠ¨ï¼Œæ”¯æŒè‡ªå®šä¹‰ç¬¦å·ã€æƒé‡é…ç½®å’Œä¸­å¥–è§„åˆ™ã€‚

## ğŸ“¦ å¯¼å…¥

```typescript
import { SlotMachine } from '@randbox/react';
import type { SlotMachineProps, SlotMachineResult } from '@randbox/react';
```

## ğŸš€ åŸºç¡€ç”¨æ³•

```typescript
import React from 'react';
import { SlotMachine } from '@randbox/react';

function BasicSlotMachine() {
  const reels = [
    ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', '7ï¸âƒ£'],
    ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', '7ï¸âƒ£'],
    ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', '7ï¸âƒ£']
  ];

  const handleResult = (result) => {
    console.log('è€è™æœºç»“æœ:', result);
    if (result.isJackpot) {
      alert('ğŸ‰ æ­å–œä¸­å¤§å¥–ï¼');
    }
  };

  return (
    <SlotMachine
      reels={reels}
      onResult={handleResult}
    />
  );
}
```

## ğŸ¯ é«˜çº§ç”¨æ³•

### å¸¦æƒé‡çš„æ»šåŠ¨æŠ½å¥–

```typescript
function WeightedSlotMachine() {
  const reels = [
    ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', '7ï¸âƒ£'],
    ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', '7ï¸âƒ£'],
    ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', '7ï¸âƒ£']
  ];

  // ä¸ºæ¯ä¸ªæ»šè½´è®¾ç½®ä¸åŒçš„æƒé‡
  const weights = [
    [20, 18, 15, 12, 10, 8, 5, 2],  // ç¬¬ä¸€ä¸ªæ»šè½´æƒé‡
    [20, 18, 15, 12, 10, 8, 5, 2],  // ç¬¬äºŒä¸ªæ»šè½´æƒé‡
    [20, 18, 15, 12, 10, 8, 5, 2]   // ç¬¬ä¸‰ä¸ªæ»šè½´æƒé‡
  ];

  return (
    <SlotMachine
      reels={reels}
      weights={weights}
      animationDuration={4000}
      onResult={(result) => {
        console.log('æƒé‡æŠ½å¥–ç»“æœ:', result);
        if (result.combination === 'ğŸ’ğŸ’ğŸ’') {
          alert('ğŸ’ é’»çŸ³å¤§å¥–ï¼');
        }
      }}
    />
  );
}
```

### æ•°å­—è€è™æœº

```typescript
function NumberSlotMachine() {
  const numberReels = [
    ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],
    ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],
    ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9']
  ];

  const checkJackpot = (results) => {
    // æ£€æŸ¥æ˜¯å¦ä¸ºé¡ºå­æˆ–ä¸‰ä¸ªç›¸åŒæ•°å­—
    const [a, b, c] = results.map(r => parseInt(r));
    return a === b && b === c; // ä¸‰ä¸ªç›¸åŒæ•°å­—
  };

  return (
    <SlotMachine
      reels={numberReels}
      animationDuration={3000}
      onResult={(result) => {
        const isWin = checkJackpot(result.results);
        console.log('æ•°å­—è€è™æœº:', { ...result, isWin });
      }}
    />
  );
}
```

### äº”è½´è€è™æœº

```typescript
function FiveReelSlotMachine() {
  const symbols = ['A', 'K', 'Q', 'J', '10', '9', '8', '7'];
  const reels = Array(5).fill(symbols);

  // ä¸ºäº”è½´è®¾ç½®ä¸åŒçš„æƒé‡åˆ†å¸ƒ
  const weights = reels.map((_, index) => {
    // ä¸­é—´è½´æ¯”è¾ƒå®¹æ˜“å‡ºå¥½ç¬¦å·
    const bonus = index === 2 ? 1.2 : 1.0;
    return symbols.map((_, i) => (symbols.length - i) * bonus);
  });

  const checkWinningLines = (results) => {
    const lines = [
      results, // ä¸­é—´çº¿
      // å¯ä»¥æ·»åŠ æ›´å¤šæ”¯ä»˜çº¿é€»è¾‘
    ];

    return lines.some(line => {
      const first = line[0];
      return line.every(symbol => symbol === first);
    });
  };

  return (
    <SlotMachine
      reels={reels}
      weights={weights}
      animationDuration={5000}
      onResult={(result) => {
        const hasWin = checkWinningLines(result.results);
        console.log('äº”è½´ç»“æœ:', { ...result, hasWin });
      }}
    />
  );
}
```

### å®Œæ•´é…ç½®ç¤ºä¾‹

```typescript
function FullConfigSlotMachine() {
  const [isSpinning, setIsSpinning] = useState(false);
  const [totalSpins, setTotalSpins] = useState(0);
  const [wins, setWins] = useState(0);
  const [history, setHistory] = useState([]);

  const reels = [
    ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', 'â­'],
    ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', 'â­'],
    ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', 'â­']
  ];

  const weights = [
    [25, 20, 15, 12, 10, 8, 5, 5],
    [25, 20, 15, 12, 10, 8, 5, 5],
    [25, 20, 15, 12, 10, 8, 5, 5]
  ];

  const handleGameStart = () => {
    setIsSpinning(true);
    console.log('å¼€å§‹æ—‹è½¬...');
  };

  const handleGameEnd = (result) => {
    setIsSpinning(false);
    setTotalSpins(prev => prev + 1);

    if (result.isJackpot) {
      setWins(prev => prev + 1);
    }

    setHistory(prev => [result, ...prev.slice(0, 9)]);
    console.log('æ—‹è½¬ç»“æŸ:', result);
  };

  const winRate = totalSpins > 0 ? ((wins / totalSpins) * 100).toFixed(1) : '0.0';

  return (
    <div style={{ padding: '20px' }}>
      {/* ç»Ÿè®¡ä¿¡æ¯ */}
      <div style={{ marginBottom: '20px', textAlign: 'center' }}>
        <div>æ€»æ—‹è½¬æ¬¡æ•°: {totalSpins} | ä¸­å¥–æ¬¡æ•°: {wins} | ä¸­å¥–ç‡: {winRate}%</div>
      </div>

      <SlotMachine
        reels={reels}
        weights={weights}
        animationDuration={3500}
        buttonText={isSpinning ? 'æ—‹è½¬ä¸­...' : 'ğŸ° å¼€å§‹æ—‹è½¬'}
        className="casino-slot"
        style={{ border: '3px solid gold', borderRadius: '15px' }}
        disabled={isSpinning}
        onGameStart={handleGameStart}
        onGameEnd={handleGameEnd}
        onResult={(result) => {
          console.log('å®æ—¶ç»“æœ:', result);
        }}
      />

      {/* å†å²è®°å½• */}
      {history.length > 0 && (
        <div style={{ marginTop: '20px' }}>
          <h3>æœ€è¿‘æ—‹è½¬è®°å½•ï¼š</h3>
          {history.map((result, index) => (
            <div
              key={index}
              style={{
                padding: '8px',
                backgroundColor: result.isJackpot ? '#fff3cd' : '#f8f9fa',
                margin: '5px 0',
                borderRadius: '5px',
                border: result.isJackpot ? '2px solid #ffc107' : '1px solid #dee2e6'
              }}
            >
              <strong>{result.combination}</strong>
              {result.isJackpot && <span style={{ color: '#d4a853', marginLeft: '10px' }}>ğŸ‰ ä¸­å¥–!</span>}
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
```

## ğŸ“‹ APIå‚è€ƒ

### SlotMachineProps

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `reels` | `string[][]` | **å¿…éœ€** | æ»šè½´é…ç½®ï¼Œæ¯ä¸ªå­æ•°ç»„ä»£è¡¨ä¸€ä¸ªæ»šè½´çš„ç¬¦å· |
| `weights` | `number[][]` | `undefined` | æƒé‡é…ç½®ï¼Œæ§åˆ¶æ¯ä¸ªæ»šè½´ä¸Šç¬¦å·çš„å‡ºç°æ¦‚ç‡ |
| `animationDuration` | `number` | `3000` | åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |
| `buttonText` | `string` | `'å¼€å§‹æ—‹è½¬'` | æ“ä½œæŒ‰é’®æ–‡å­— |
| `onResult` | `(result: SlotMachineResult) => void` | `undefined` | ç»“æœå›è°ƒ |

### ç»§æ‰¿çš„BaseGameProps

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `className` | `string` | `''` | CSSç±»å |
| `style` | `React.CSSProperties` | `{}` | å†…è”æ ·å¼ |
| `disabled` | `boolean` | `false` | æ˜¯å¦ç¦ç”¨ |
| `onGameStart` | `() => void` | `undefined` | æ¸¸æˆå¼€å§‹å›è°ƒ |
| `onGameEnd` | `(result: SlotMachineResult) => void` | `undefined` | æ¸¸æˆç»“æŸå›è°ƒ |

### SlotMachineResult

```typescript
interface SlotMachineResult {
  results: string[];      // æ¯ä¸ªæ»šè½´çš„ç»“æœ
  isJackpot: boolean;     // æ˜¯å¦ä¸­å¤§å¥–
  combination: string;    // ç»„åˆå­—ç¬¦ä¸²ï¼ˆå¦‚ "ğŸğŸğŸ"ï¼‰
}
```

## ğŸ¨ æ ·å¼å®šåˆ¶

### å®¹å™¨æ ·å¼

```css
.casino-slot {
  background: linear-gradient(145deg, #2c3e50, #34495e);
  border: 3px solid #f39c12;
  border-radius: 20px;
  box-shadow:
    0 10px 30px rgba(0,0,0,0.3),
    inset 0 2px 10px rgba(255,255,255,0.1);
}

.casino-slot:hover {
  transform: scale(1.02);
  transition: transform 0.3s ease;
}
```

### éœ“è™¹ç¯æ•ˆæœ

```css
.neon-slot {
  border: 2px solid #ff6b6b;
  border-radius: 15px;
  box-shadow:
    0 0 20px #ff6b6b,
    inset 0 0 20px rgba(255, 107, 107, 0.1);
  animation: neonGlow 2s ease-in-out infinite alternate;
}

@keyframes neonGlow {
  from {
    box-shadow:
      0 0 20px #ff6b6b,
      inset 0 0 20px rgba(255, 107, 107, 0.1);
  }
  to {
    box-shadow:
      0 0 30px #ff6b6b,
      0 0 40px #ff6b6b,
      inset 0 0 30px rgba(255, 107, 107, 0.2);
  }
}
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### ä¸­å¥–è§„åˆ™å®šåˆ¶

```typescript
function CustomWinRulesSlotMachine() {
  const symbols = ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', 'â­'];
  const reels = [symbols, symbols, symbols];

  // è‡ªå®šä¹‰ä¸­å¥–è§„åˆ™
  const checkWinning = (results) => {
    const [a, b, c] = results;

    // è§„åˆ™1: ä¸‰ä¸ªç›¸åŒ
    if (a === b && b === c) return { type: 'triple', multiplier: 10 };

    // è§„åˆ™2: ä¸¤ä¸ªç›¸åŒ
    if (a === b || b === c || a === c) return { type: 'double', multiplier: 2 };

    // è§„åˆ™3: ç‰¹æ®Šç»„åˆ
    if (results.includes('ğŸ’') && results.includes('â­')) {
      return { type: 'special', multiplier: 5 };
    }

    return { type: 'none', multiplier: 0 };
  };

  return (
    <SlotMachine
      reels={reels}
      onResult={(result) => {
        const winInfo = checkWinning(result.results);
        console.log('ä¸­å¥–ä¿¡æ¯:', winInfo);

        if (winInfo.multiplier > 0) {
          alert(`ä¸­å¥–ç±»å‹: ${winInfo.type}, å€æ•°: ${winInfo.multiplier}x`);
        }
      }}
    />
  );
}
```

### æ¸è¿›å¼å¥–æ± 

```typescript
function ProgressiveSlotMachine() {
  const [jackpotAmount, setJackpotAmount] = useState(1000);
  const [lastWin, setLastWin] = useState(null);

  const reels = [
    ['ğŸ’', 'â­', 'ğŸ””', 'ğŸ’', 'ğŸ‡', 'ğŸŠ', 'ğŸ'],
    ['ğŸ’', 'â­', 'ğŸ””', 'ğŸ’', 'ğŸ‡', 'ğŸŠ', 'ğŸ'],
    ['ğŸ’', 'â­', 'ğŸ””', 'ğŸ’', 'ğŸ‡', 'ğŸŠ', 'ğŸ']
  ];

  const handleResult = (result) => {
    // æ¯æ¬¡æ¸¸æˆå¢åŠ å¥–æ± 
    setJackpotAmount(prev => prev + 10);

    if (result.combination === 'ğŸ’ğŸ’ğŸ’') {
      // ä¸­è¶…çº§å¤§å¥–
      setLastWin({ type: 'jackpot', amount: jackpotAmount });
      setJackpotAmount(1000); // é‡ç½®å¥–æ± 
      alert(`ğŸ‰ è¶…çº§å¤§å¥–ï¼å¥–é‡‘: $${jackpotAmount}`);
    } else if (result.isJackpot) {
      const amount = 100;
      setLastWin({ type: 'normal', amount });
      alert(`ğŸ‰ ä¸­å¥–ï¼å¥–é‡‘: $${amount}`);
    }
  };

  return (
    <div>
      <div style={{ textAlign: 'center', marginBottom: '20px' }}>
        <h2>ç´¯ç§¯å¥–æ± : ${jackpotAmount.toLocaleString()}</h2>
        {lastWin && (
          <div style={{ color: 'green' }}>
            ä¸Šæ¬¡ä¸­å¥–: {lastWin.type} - ${lastWin.amount}
          </div>
        )}
      </div>

      <SlotMachine
        reels={reels}
        onResult={handleResult}
      />
    </div>
  );
}
```

### å¤šæ”¯ä»˜çº¿è€è™æœº

```typescript
function MultiLineSlotMachine() {
  const symbols = ['A', 'K', 'Q', 'J', '10', '9'];
  const reels = Array(5).fill(symbols);

  // å®šä¹‰æ”¯ä»˜çº¿
  const paylines = [
    [1, 1, 1, 1, 1], // ä¸­çº¿
    [0, 0, 0, 0, 0], // ä¸Šçº¿
    [2, 2, 2, 2, 2], // ä¸‹çº¿
    [0, 1, 2, 1, 0], // Vå½¢
    [2, 1, 0, 1, 2], // å€’Vå½¢
  ];

  const checkPaylines = (results) => {
    const wins = [];

    paylines.forEach((line, lineIndex) => {
      const lineSymbols = line.map((row, col) => {
        // è¿™é‡Œéœ€è¦æ ¹æ®å®é™…çš„æ»šè½´ç»“æœçŸ©é˜µæ¥è·å–ç¬¦å·
        return results[col]; // ç®€åŒ–ç‰ˆæœ¬
      });

      // æ£€æŸ¥æ”¯ä»˜çº¿æ˜¯å¦ä¸­å¥–
      const firstSymbol = lineSymbols[0];
      let matchCount = 1;

      for (let i = 1; i < lineSymbols.length; i++) {
        if (lineSymbols[i] === firstSymbol) {
          matchCount++;
        } else {
          break;
        }
      }

      if (matchCount >= 3) {
        wins.push({
          line: lineIndex + 1,
          symbol: firstSymbol,
          count: matchCount,
          payout: calculatePayout(firstSymbol, matchCount)
        });
      }
    });

    return wins;
  };

  const calculatePayout = (symbol, count) => {
    const payouts = {
      'A': [0, 0, 50, 200, 1000],
      'K': [0, 0, 25, 100, 500],
      'Q': [0, 0, 20, 80, 400],
      'J': [0, 0, 15, 60, 300],
      '10': [0, 0, 10, 40, 200],
      '9': [0, 0, 5, 20, 100],
    };

    return payouts[symbol]?.[count] || 0;
  };

  return (
    <SlotMachine
      reels={reels}
      onResult={(result) => {
        const wins = checkPaylines(result.results);
        const totalPayout = wins.reduce((sum, win) => sum + win.payout, 0);

        console.log('æ”¯ä»˜çº¿ä¸­å¥–:', wins);
        if (totalPayout > 0) {
          alert(`ä¸­å¥–ï¼æ€»å¥–é‡‘: ${totalPayout}`);
        }
      }}
    />
  );
}
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ç¬¦å·è®¾è®¡å»ºè®®

```typescript
// ä½¿ç”¨æ˜“åŒºåˆ†çš„ç¬¦å·
const goodSymbols = ['ğŸ', 'ğŸŠ', 'ğŸ‹', 'ğŸ’', 'ğŸ‡', 'ğŸ””', 'ğŸ’', 'â­'];

// é¿å…ç›¸ä¼¼ç¬¦å·
const badSymbols = ['ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜']; // å¤ªç›¸ä¼¼ï¼Œéš¾ä»¥åŒºåˆ†
```

### 2. æƒé‡å¹³è¡¡

```typescript
// å¹³è¡¡çš„æƒé‡åˆ†é…
const balancedWeights = [
  [30, 25, 20, 15, 5, 3, 1, 1], // å¸¸è§ç¬¦å·æƒé‡é«˜ï¼Œç¨€æœ‰ç¬¦å·æƒé‡ä½
  [30, 25, 20, 15, 5, 3, 1, 1],
  [30, 25, 20, 15, 5, 3, 1, 1]
];
```

### 3. æ€§èƒ½ä¼˜åŒ–

```typescript
// ä½¿ç”¨React.memoä¼˜åŒ–é‡æ¸²æŸ“
const OptimizedSlotMachine = React.memo(({ reels, ...props }) => {
  return <SlotMachine reels={reels} {...props} />;
});

// ä½¿ç”¨useMemoç¼“å­˜å¤æ‚è®¡ç®—
function CachedSlotMachine() {
  const reels = useMemo(() =>
    generateReels(complexity), [complexity]
  );

  return <SlotMachine reels={reels} />;
}
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: å¦‚ä½•å®ç°çœŸæ­£çš„éšæœºæ€§ï¼Ÿ
A: ç»„ä»¶ä½¿ç”¨RandBoxçš„Mersenne Twisterç®—æ³•ï¼Œæä¾›é«˜è´¨é‡çš„éšæœºæ•°ç”Ÿæˆã€‚

### Q: æ»šè½´æ•°é‡æœ‰é™åˆ¶å—ï¼Ÿ
A: ç†è®ºä¸Šæ²¡æœ‰é™åˆ¶ï¼Œä½†å»ºè®®ä¸è¶…è¿‡7ä¸ªæ»šè½´ä»¥ä¿è¯æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚

### Q: å¯ä»¥å®ç°å¼‚æ­¥æ»šåŠ¨å—ï¼Ÿ
A: æ˜¯çš„ï¼Œç»„ä»¶å†…éƒ¨å·²å®ç°å¼‚æ­¥æ»šåŠ¨æ•ˆæœï¼Œæ¯ä¸ªæ»šè½´ä¼šåœ¨ä¸åŒæ—¶é—´åœæ­¢ã€‚

### Q: å¦‚ä½•è°ƒæ•´ä¸­å¥–æ¦‚ç‡ï¼Ÿ
A: é€šè¿‡weightså±æ€§è°ƒæ•´æ¯ä¸ªç¬¦å·çš„æƒé‡ï¼Œæƒé‡è¶Šé«˜å‡ºç°æ¦‚ç‡è¶Šå¤§ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [GridLottery - ä¹å®«æ ¼æŠ½å¥–](/zh/docs/react/grid-lottery)
- [ScratchCard - åˆ®åˆ®å¡](/zh/docs/react/scratch-card)
- [DiceGame - éª°å­æ¸¸æˆ](/zh/docs/react/dice-game)
- [RandBox æƒé‡æ–¹æ³•](/zh/docs/miscellaneous/weighted)