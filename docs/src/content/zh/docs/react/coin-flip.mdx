---
title: 'CoinFlip - æŠ›ç¡¬å¸'
description: 'åŸºäºCanvasçš„3Dç¡¬å¸æŠ›æ·æ¸¸æˆç»„ä»¶ï¼Œæ”¯æŒåŠ¨ç”»æ•ˆæœå’Œç»Ÿè®¡æ•°æ®'
---

# CoinFlip - æŠ›ç¡¬å¸

`CoinFlip` æ˜¯ä¸€ä¸ªåŸºäºCanvasçš„3Dç¡¬å¸æŠ›æ·æ¸¸æˆç»„ä»¶ï¼Œæä¾›çœŸå®çš„ç¡¬å¸ç¿»è½¬åŠ¨ç”»å’Œç»Ÿè®¡åŠŸèƒ½ã€‚

## ğŸ“¦ å¯¼å…¥

```typescript
import { CoinFlip } from '@randbox/react';
import type { CoinFlipProps, CoinFlipResult, CoinFlipStats } from '@randbox/react';
```

## ğŸ¯ ç±»å‹å®šä¹‰

### CoinFlipProps

```typescript
interface CoinFlipProps {
  // å¯é€‰å±æ€§
  animationDuration?: number;                      // åŠ¨ç”»æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤2000
  showStats?: boolean;                             // æ˜¯å¦æ˜¾ç¤ºç»Ÿè®¡ï¼Œé»˜è®¤true

  // åŸºç¡€å±æ€§ï¼ˆç»§æ‰¿è‡ªBaseGamePropsï¼‰
  className?: string;                              // CSSç±»å
  style?: React.CSSProperties;                    // å†…è”æ ·å¼
  disabled?: boolean;                              // æ˜¯å¦ç¦ç”¨

  // å›è°ƒå‡½æ•°
  onGameStart?: () => void;                       // æ¸¸æˆå¼€å§‹å›è°ƒ
  onGameEnd?: (result: CoinFlipResult) => void;  // æ¸¸æˆç»“æŸå›è°ƒ
  onResult?: (result: CoinFlipResult) => void;   // ç»“æœå›è°ƒ
}
```

### CoinFlipResult

```typescript
interface CoinFlipResult {
  result: 'heads' | 'tails';  // ç¡¬å¸ç»“æœï¼šæ­£é¢æˆ–åé¢
  round: number;              // å›åˆæ•°
  timestamp: number;          // æ—¶é—´æˆ³
}
```

### CoinFlipStats

```typescript
interface CoinFlipStats {
  totalFlips: number;    // æ€»æŠ›æ·æ¬¡æ•°
  heads: number;         // æ­£é¢æ¬¡æ•°
  tails: number;         // åé¢æ¬¡æ•°
  headsRate: string;     // æ­£é¢æ¦‚ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
  tailsRate: string;     // åé¢æ¦‚ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
}
```

## ğŸš€ åŸºç¡€ç”¨æ³•

```typescript
import React from 'react';
import { CoinFlip } from '@randbox/react';

function BasicCoinFlip() {
  const handleResult = (result) => {
    console.log('æŠ›å¸ç»“æœ:', result);
    alert(`ç»“æœæ˜¯ï¼š${result.result === 'heads' ? 'æ­£é¢' : 'åé¢'}`);
  };

  return (
    <CoinFlip onResult={handleResult} />
  );
}
```

## ğŸ¨ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰åŠ¨ç”»æ—¶é•¿

```typescript
function FastCoinFlip() {
  return (
    <div>
      <h3>å¿«é€Ÿæ¨¡å¼ï¼ˆ1ç§’ï¼‰</h3>
      <CoinFlip animationDuration={1000} />

      <h3>æ…¢é€Ÿæ¨¡å¼ï¼ˆ3ç§’ï¼‰</h3>
      <CoinFlip animationDuration={3000} />
    </div>
  );
}
```

### éšè—ç»Ÿè®¡ä¿¡æ¯

```typescript
function SimpleCoinFlip() {
  return (
    <CoinFlip
      showStats={false}
      animationDuration={1500}
      onResult={(result) => {
        console.log('ç»“æœ:', result.result);
      }}
    />
  );
}
```

### å®Œæ•´é…ç½®ç¤ºä¾‹

```typescript
function FullConfigCoinFlip() {
  const [isFlipping, setIsFlipping] = useState(false);
  const [history, setHistory] = useState<CoinFlipResult[]>([]);
  const [stats, setStats] = useState<CoinFlipStats>({
    totalFlips: 0,
    heads: 0,
    tails: 0,
    headsRate: '0',
    tailsRate: '0'
  });

  const handleGameStart = () => {
    setIsFlipping(true);
    console.log('å¼€å§‹æŠ›ç¡¬å¸...');
  };

  const handleGameEnd = (result: CoinFlipResult) => {
    setIsFlipping(false);
    setHistory(prev => [result, ...prev.slice(0, 9)]);

    // æ›´æ–°ç»Ÿè®¡
    const newStats = {
      totalFlips: stats.totalFlips + 1,
      heads: stats.heads + (result.result === 'heads' ? 1 : 0),
      tails: stats.tails + (result.result === 'tails' ? 1 : 0),
      headsRate: '0',
      tailsRate: '0'
    };
    newStats.headsRate = ((newStats.heads / newStats.totalFlips) * 100).toFixed(1);
    newStats.tailsRate = ((newStats.tails / newStats.totalFlips) * 100).toFixed(1);
    setStats(newStats);
  };

  return (
    <div style={{ padding: '20px' }}>
      <CoinFlip
        animationDuration={2000}
        showStats={true}
        className="my-coin-flip"
        disabled={isFlipping}
        onGameStart={handleGameStart}
        onGameEnd={handleGameEnd}
        onResult={(result) => {
          console.log('å®æ—¶ç»“æœ:', result);
        }}
      />

      {/* æŠ›å¸å†å² */}
      {history.length > 0 && (
        <div style={{ marginTop: '20px' }}>
          <h3>æœ€è¿‘10æ¬¡è®°å½•ï¼š</h3>
          <div style={{ display: 'flex', gap: '5px', flexWrap: 'wrap' }}>
            {history.map((result, index) => (
              <span
                key={index}
                style={{
                  padding: '5px 10px',
                  backgroundColor: result.result === 'heads' ? '#2ecc71' : '#e74c3c',
                  color: 'white',
                  borderRadius: '5px',
                  fontSize: '12px'
                }}
              >
                {result.result === 'heads' ? 'æ­£é¢' : 'åé¢'}
              </span>
            ))}
          </div>
        </div>
      )}

      {/* ç»Ÿè®¡æ±‡æ€» */}
      <div style={{ marginTop: '20px', padding: '15px', backgroundColor: '#f5f5f5' }}>
        <h3>ç»Ÿè®¡æ±‡æ€»</h3>
        <p>æ€»æ¬¡æ•°ï¼š{stats.totalFlips}</p>
        <p>æ­£é¢ï¼š{stats.heads} æ¬¡ ({stats.headsRate}%)</p>
        <p>åé¢ï¼š{stats.tails} æ¬¡ ({stats.tailsRate}%)</p>
      </div>
    </div>
  );
}
```

## ğŸ“‹ APIå‚è€ƒ

### å±æ€§è¯´æ˜

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `animationDuration` | `number` | `2000` | åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |
| `showStats` | `boolean` | `true` | æ˜¯å¦æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ |
| `className` | `string` | `''` | CSSç±»å |
| `style` | `React.CSSProperties` | `{}` | å†…è”æ ·å¼ |
| `disabled` | `boolean` | `false` | æ˜¯å¦ç¦ç”¨ |
| `onGameStart` | `() => void` | `undefined` | æ¸¸æˆå¼€å§‹å›è°ƒ |
| `onGameEnd` | `(result) => void` | `undefined` | æ¸¸æˆç»“æŸå›è°ƒ |
| `onResult` | `(result) => void` | `undefined` | ç»“æœå›è°ƒ |

### CoinFlipResult ç»“æ„

```typescript
{
  result: "heads",        // "heads" æˆ– "tails"
  round: 1,              // å½“å‰å›åˆæ•°
  timestamp: 1234567890  // æ—¶é—´æˆ³
}
```

## ğŸ¨ æ ·å¼å®šåˆ¶

### å®¹å™¨æ ·å¼

```css
.my-coin-flip {
  border: 3px solid #f39c12;
  border-radius: '20px';
  padding: '20px';
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### çŒœç¡¬å¸æ¸¸æˆ

```typescript
function GuessCoinGame() {
  const [guess, setGuess] = useState<'heads' | 'tails' | null>(null);
  const [score, setScore] = useState({ wins: 0, losses: 0 });

  const handleResult = (result: CoinFlipResult) => {
    if (guess === result.result) {
      setScore(prev => ({ ...prev, wins: prev.wins + 1 }));
      alert('çŒœå¯¹äº†ï¼ğŸ‰');
    } else {
      setScore(prev => ({ ...prev, losses: prev.losses + 1 }));
      alert('çŒœé”™äº†ï¼ğŸ˜¢');
    }
    setGuess(null);
  };

  return (
    <div>
      <h3>çŒœç¡¬å¸æ¸¸æˆ</h3>
      <p>æˆ˜ç»© - èµ¢ï¼š{score.wins} è¾“ï¼š{score.losses}</p>

      <div style={{ marginBottom: '20px' }}>
        <button onClick={() => setGuess('heads')} disabled={guess !== null}>
          çŒœæ­£é¢
        </button>
        <button onClick={() => setGuess('tails')} disabled={guess !== null}>
          çŒœåé¢
        </button>
      </div>

      <CoinFlip
        disabled={guess === null}
        onResult={handleResult}
      />

      {guess && <p>ä½ çš„é€‰æ‹©ï¼š{guess === 'heads' ? 'æ­£é¢' : 'åé¢'}</p>}
    </div>
  );
}
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æ¦‚ç‡éªŒè¯

```typescript
// å¤§é‡å®éªŒéªŒè¯éšæœºæ€§
function ProbabilityTest() {
  const [trials, setTrials] = useState(0);
  const [heads, setHeads] = useState(0);

  const runTrials = (n: number) => {
    for (let i = 0; i < n; i++) {
      // æ¨¡æ‹ŸæŠ›å¸...
    }
  };

  return (
    <div>
      <button onClick={() => runTrials(1000)}>è¿è¡Œ1000æ¬¡</button>
      <p>æ€»æ¬¡æ•°ï¼š{trials}</p>
      <p>æ­£é¢ç‡ï¼š{(heads / trials * 100).toFixed(2)}%</p>
      <p>ç†è®ºå€¼ï¼š50%</p>
    </div>
  );
}
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: ç»“æœçœŸçš„æ˜¯éšæœºçš„å—ï¼Ÿ
A: æ˜¯çš„ï¼Œä½¿ç”¨RandBoxçš„Mersenne Twisterç®—æ³•ï¼Œç¡®ä¿é«˜è´¨é‡çš„éšæœºæ€§ã€‚

### Q: å¯ä»¥é¢„æµ‹ç»“æœå—ï¼Ÿ
A: ä¸å¯ä»¥ï¼Œæ¯æ¬¡æŠ›å¸éƒ½æ˜¯ç‹¬ç«‹äº‹ä»¶ï¼Œæ— æ³•é¢„æµ‹ã€‚

### Q: ä¸ºä»€ä¹ˆè¿ç»­å‡ºç°å¤šæ¬¡ç›¸åŒç»“æœï¼Ÿ
A: è¿™æ˜¯æ­£å¸¸çš„éšæœºç°è±¡ï¼Œç±»ä¼¼ç°å®ä¸­çš„è¿ç»­æ­£é¢æˆ–åé¢ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [DiceGame - éª°å­æ¸¸æˆ](/zh/docs/react/dice-game)
- [RockPaperScissors - çŸ³å¤´å‰ªåˆ€å¸ƒ](/zh/docs/react/rock-paper-scissors)
- [RandBox æ ¸å¿ƒåº“](/zh/docs/basics)
