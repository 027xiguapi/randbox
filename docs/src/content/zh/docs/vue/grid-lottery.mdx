---
title: 'GridLottery - ä¹å®«æ ¼æŠ½å¥–'
description: 'åŸºäºCanvaså’ŒVue 3çš„ä¹å®«æ ¼æŠ½å¥–ç»„ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰å¥–å“ã€æƒé‡é…ç½®å’Œæµç•…çš„æŠ½å¥–åŠ¨ç”»'
---

# GridLottery - ä¹å®«æ ¼æŠ½å¥–

`GridLottery` æ˜¯ä¸€ä¸ªåŸºäºCanvaså’ŒVue 3çš„ä¹å®«æ ¼æŠ½å¥–ç»„ä»¶ï¼Œæä¾›ç»å…¸çš„è½¬ç›˜æŠ½å¥–ä½“éªŒã€‚æ”¯æŒè‡ªå®šä¹‰å¥–å“ã€æƒé‡é…ç½®ã€åŠ¨ç”»æ•ˆæœç­‰ä¸°å¯ŒåŠŸèƒ½ã€‚

## ğŸ“¦ å¯¼å…¥

```vue
<script setup>
import { GridLottery } from '@randbox/vue'
// æˆ–è€…å¯¼å…¥ç±»å‹
import type { GridLotteryProps, GridLotteryResult } from '@randbox/vue'
</script>
```

## ğŸš€ åŸºç¡€ç”¨æ³•

```vue
<template>
  <GridLottery
    :prizes="prizes"
    @result="handleResult"
  />
</template>

<script setup>
import { ref } from 'vue'
import { GridLottery } from '@randbox/vue'

const prizes = ref([
  'ä¸€ç­‰å¥–', 'äºŒç­‰å¥–', 'ä¸‰ç­‰å¥–',
  'å››ç­‰å¥–', 'äº”ç­‰å¥–', 'å…­ç­‰å¥–',
  'ä¸ƒç­‰å¥–', 'å…«ç­‰å¥–', 'è°¢è°¢å‚ä¸'
])

const handleResult = (result) => {
  console.log('æŠ½å¥–ç»“æœ:', result)
}
</script>
```

## ğŸ¯ é«˜çº§ç”¨æ³•

### å¸¦æƒé‡çš„æŠ½å¥–

```vue
<template>
  <GridLottery
    :prizes="prizes"
    :weights="weights"
    :animation-duration="3000"
    @result="handleResult"
  />
</template>

<script setup>
import { ref } from 'vue'

const prizes = ref([
  'iPhone 15 Pro', 'iPad', 'AirPods',
  'Apple Watch', 'ä¼˜æƒ åˆ¸', 'ç§¯åˆ†',
  'ä»£é‡‘åˆ¸', 'çº¢åŒ…', 'è°¢è°¢å‚ä¸'
])

// æƒé‡è¶Šé«˜ï¼Œä¸­å¥–æ¦‚ç‡è¶Šå¤§
const weights = ref([1, 3, 5, 8, 15, 20, 25, 20, 3])

const handleResult = (result) => {
  if (result.prize !== 'è°¢è°¢å‚ä¸') {
    alert(`æ­å–œæ‚¨ä¸­å¥–äº†ï¼š${result.prize}ï¼`)
  }
}
</script>
```

### è‡ªå®šä¹‰ç½‘æ ¼å¤§å°

```vue
<template>
  <GridLottery
    :prizes="prizes"
    :grid-size="16"
    @result="handleResult"
  />
</template>

<script setup>
import { ref, computed } from 'vue'

// 4x4ç½‘æ ¼ï¼Œå…±16ä¸ªå¥–å“
const prizes = computed(() =>
  Array.from({ length: 16 }, (_, i) => `å¥–å“${i + 1}`)
)

const handleResult = (result) => {
  console.log('4x4ç½‘æ ¼æŠ½å¥–ç»“æœ:', result)
}
</script>
```

### å®Œæ•´é…ç½®ç¤ºä¾‹

```vue
<template>
  <div class="lottery-container">
    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <div class="stats-panel">
      <div>æ€»æ—‹è½¬æ¬¡æ•°: {{ totalSpins }} | ä¸­å¥–æ¬¡æ•°: {{ wins }} | ä¸­å¥–ç‡: {{ winRate }}%</div>
    </div>

    <GridLottery
      :prizes="prizes"
      :weights="weights"
      :grid-size="9"
      :animation-duration="2500"
      :button-text="isDrawing ? 'æŠ½å¥–ä¸­...' : 'å¼€å§‹æŠ½å¥–'"
      class="my-lottery"
      :style="{ margin: '20px auto' }"
      :disabled="isDrawing"
      @game-start="handleGameStart"
      @game-end="handleGameEnd"
      @result="handleResult"
    />

    <!-- å†å²è®°å½• -->
    <div v-if="results.length > 0" class="history">
      <h3>æœ€è¿‘æŠ½å¥–è®°å½•ï¼š</h3>
      <div
        v-for="(result, index) in results"
        :key="index"
        class="history-item"
      >
        ç¬¬ {{ result.position + 1 }} ä½ï¼š{{ result.prize }}
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { GridLottery } from '@randbox/vue'

const isDrawing = ref(false)
const results = ref([])

const prizes = ref([
  'ğŸ è¶…çº§å¤§å¥–', 'ğŸ† ä¸€ç­‰å¥–', 'ğŸ’ äºŒç­‰å¥–',
  'â­ ä¸‰ç­‰å¥–', 'ğŸ¯ å››ç­‰å¥–', 'ğŸª äº”ç­‰å¥–',
  'ğŸ¨ å…­ç­‰å¥–', 'ğŸ­ ä¸ƒç­‰å¥–', 'ğŸŠ è°¢è°¢å‚ä¸'
])

const weights = ref([1, 2, 5, 10, 15, 20, 25, 20, 2])

// è®¡ç®—ç»Ÿè®¡æ•°æ®
const totalSpins = computed(() => results.value.length)
const wins = computed(() =>
  results.value.filter(r => r.prize !== 'ğŸŠ è°¢è°¢å‚ä¸').length
)
const winRate = computed(() =>
  totalSpins.value > 0 ? ((wins.value / totalSpins.value) * 100).toFixed(1) : '0.0'
)

const handleGameStart = () => {
  isDrawing.value = true
  console.log('å¼€å§‹æŠ½å¥–...')
}

const handleGameEnd = (result) => {
  isDrawing.value = false
  results.value = [result, ...results.value.slice(0, 4)]
  console.log('æŠ½å¥–ç»“æŸ:', result)
}

const handleResult = (result) => {
  console.log('å®æ—¶ç»“æœ:', result)
}
</script>

<style scoped>
.lottery-container {
  padding: 20px;
}

.stats-panel {
  margin-bottom: 20px;
  padding: 15px;
  background-color: #e8f4fd;
  border-radius: 10px;
  text-align: center;
}

.my-lottery {
  border: 3px solid #ff6b6b;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
}

.history {
  margin-top: 20px;
}

.history-item {
  padding: 5px;
  background-color: #f5f5f5;
  margin: 5px 0;
  border-radius: 4px;
}
</style>
```

### å“åº”å¼è®¾è®¡

```vue
<template>
  <div :style="containerStyle">
    <GridLottery
      :prizes="prizes"
      @result="handleResult"
    />
  </div>
</template>

<script setup>
import { ref, computed, onMounted, onUnmounted } from 'vue'

const windowWidth = ref(window.innerWidth)

const containerStyle = computed(() => {
  const width = Math.min(windowWidth.value - 40, 500)
  return {
    width: `${width}px`,
    height: `${width}px`,
    margin: '0 auto'
  }
})

const prizes = ref([
  'å¥–å“1', 'å¥–å“2', 'å¥–å“3', 'å¥–å“4',
  'å¥–å“5', 'å¥–å“6', 'å¥–å“7', 'å¥–å“8', 'è°¢è°¢å‚ä¸'
])

const updateSize = () => {
  windowWidth.value = window.innerWidth
}

onMounted(() => {
  window.addEventListener('resize', updateSize)
})

onUnmounted(() => {
  window.removeEventListener('resize', updateSize)
})

const handleResult = (result) => {
  console.log('å“åº”å¼æŠ½å¥–ç»“æœ:', result)
}
</script>
```

### åŠ¨æ€æ›´æ–°å¥–å“

```vue
<template>
  <div>
    <button @click="updatePrizes">æ›´æ–°å¥–å“</button>

    <GridLottery
      :key="prizeKey"
      :prizes="prizes"
      @result="handleResult"
    />
  </div>
</template>

<script setup>
import { ref } from 'vue'

const prizeKey = ref(0)
const prizes = ref([
  'å¥–å“A', 'å¥–å“B', 'å¥–å“C',
  'å¥–å“D', 'å¥–å“E', 'å¥–å“F',
  'å¥–å“G', 'å¥–å“H', 'è°¢è°¢å‚ä¸'
])

const updatePrizes = () => {
  prizes.value[0] = `æ–°å¥–å“${Date.now()}`
  prizeKey.value++ // å¼ºåˆ¶é‡æ–°æ¸²æŸ“ç»„ä»¶
}

const handleResult = (result) => {
  console.log('ä¸­å¥–:', result.prize)
}
</script>
```

### æŠ½å¥–æ¬¡æ•°é™åˆ¶

```vue
<template>
  <div>
    <p>å‰©ä½™æŠ½å¥–æ¬¡æ•°ï¼š{{ remainingTries }}</p>

    <GridLottery
      :prizes="prizes"
      :disabled="!canDraw"
      :button-text="canDraw ? 'å¼€å§‹æŠ½å¥–' : 'ä»Šæ—¥æŠ½å¥–å·²ç”¨å®Œ'"
      @game-start="handleGameStart"
      @game-end="handleGameEnd"
    />
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'

const remainingTries = ref(3)

const canDraw = computed(() => remainingTries.value > 0)

const prizes = ref([
  'å¤§å¥–', 'å°å¥–', 'è°¢è°¢å‚ä¸', 'å†æ¥ä¸€æ¬¡',
  'ä¼˜æƒ åˆ¸', 'ç§¯åˆ†', 'çº¢åŒ…', 'ç¤¼å“', 'ç©ºå¥–'
])

const handleGameStart = () => {
  if (remainingTries.value <= 0) {
    return
  }
}

const handleGameEnd = (result) => {
  remainingTries.value--
  console.log('å‰©ä½™æ¬¡æ•°:', remainingTries.value)
}
</script>
```

## ğŸ“‹ APIå‚è€ƒ

### Props

| å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
|------|------|--------|------|
| `prizes` | `string[]` | **å¿…éœ€** | å¥–å“åˆ—è¡¨ï¼Œæ•°ç»„é•¿åº¦åº”åŒ¹é…gridSize |
| `weights` | `number[]` | `undefined` | æƒé‡æ•°ç»„ï¼Œæ§åˆ¶æ¯ä¸ªå¥–å“çš„ä¸­å¥–æ¦‚ç‡ |
| `gridSize` | `number` | `9` | ç½‘æ ¼å¤§å°ï¼ˆå¥–å“æ•°é‡ï¼‰ |
| `animationDuration` | `number` | `3000` | åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ |
| `buttonText` | `string` | `'å¼€å§‹æŠ½å¥–'` | æŠ½å¥–æŒ‰é’®æ–‡å­— |
| `class` | `string` | `''` | CSSç±»å |
| `style` | `Record<string, any>` | `{}` | å†…è”æ ·å¼ |
| `disabled` | `boolean` | `false` | æ˜¯å¦ç¦ç”¨ |

### Events

| äº‹ä»¶å | å‚æ•° | æè¿° |
|--------|------|------|
| `result` | `(result: GridLotteryResult)` | æŠ½å¥–ç»“æœå›è°ƒ |
| `game-start` | `()` | æ¸¸æˆå¼€å§‹å›è°ƒ |
| `game-end` | `(result: GridLotteryResult)` | æ¸¸æˆç»“æŸå›è°ƒ |

### GridLotteryResult

```typescript
interface GridLotteryResult {
  position: number        // ä¸­å¥–ä½ç½®ç´¢å¼•ï¼ˆ0-8ï¼‰
  prize: string          // ä¸­å¥–å¥–å“
  animation: number[]    // åŠ¨ç”»è·¯å¾„æ•°ç»„
}
```

## ğŸ¨ æ ·å¼å®šåˆ¶

### å®¹å™¨æ ·å¼

```vue
<style scoped>
.my-lottery {
  border: 3px solid #ff6b6b;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
}

.my-lottery:hover {
  transform: translateY(-2px);
  transition: transform 0.3s ease;
}
</style>
```

### ä¸»é¢˜åˆ‡æ¢

```vue
<template>
  <div>
    <select v-model="currentTheme">
      <option value="default">é»˜è®¤ä¸»é¢˜</option>
      <option value="dark">æš—è‰²ä¸»é¢˜</option>
      <option value="colorful">å½©è‰²ä¸»é¢˜</option>
    </select>

    <GridLottery
      :prizes="prizes"
      :class="themeClass"
      @result="handleResult"
    />
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'

const currentTheme = ref('default')

const themeClass = computed(() => `theme-${currentTheme.value}`)

const prizes = ref(['å¥–å“1', 'å¥–å“2', 'å¥–å“3', 'è°¢è°¢å‚ä¸'])
</script>

<style scoped>
.theme-default {
  border: 2px solid #ddd;
  background: #fff;
}

.theme-dark {
  border: 2px solid #555;
  background: #333;
  color: #fff;
}

.theme-colorful {
  border: 3px solid;
  border-image: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1) 1;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
</style>
```

## ğŸ”§ é«˜çº§åŠŸèƒ½

### ä¸PiniaçŠ¶æ€ç®¡ç†é›†æˆ

```vue
<template>
  <GridLottery
    :prizes="gameStore.prizes"
    :disabled="gameStore.isLoading"
    @result="gameStore.recordResult"
  />

  <div class="stats">
    <div>æ€»æŠ½å¥–æ¬¡æ•°: {{ gameStore.totalDraws }}</div>
    <div>ä¸­å¥–ç‡: {{ gameStore.winRate }}%</div>
  </div>
</template>

<script setup>
import { useGameStore } from '@/stores/game'

const gameStore = useGameStore()
</script>
```

```typescript
// stores/game.ts
import { defineStore } from 'pinia'

export const useGameStore = defineStore('game', {
  state: () => ({
    prizes: ['å¤§å¥–', 'å°å¥–', 'è°¢è°¢å‚ä¸'],
    totalDraws: 0,
    totalWins: 0,
    isLoading: false,
    results: []
  }),

  getters: {
    winRate: (state) =>
      state.totalDraws > 0 ? ((state.totalWins / state.totalDraws) * 100).toFixed(1) : '0'
  },

  actions: {
    recordResult(result) {
      this.totalDraws++
      if (result.prize !== 'è°¢è°¢å‚ä¸') {
        this.totalWins++
      }
      this.results.unshift(result)
    }
  }
})
```

### ç»„åˆå¼å‡½æ•°å°è£…

```typescript
// composables/useLottery.ts
import { ref, computed } from 'vue'

export function useLottery(initialPrizes = []) {
  const prizes = ref(initialPrizes)
  const results = ref([])
  const isDrawing = ref(false)

  const totalDraws = computed(() => results.value.length)
  const wins = computed(() =>
    results.value.filter(r => r.prize !== 'è°¢è°¢å‚ä¸').length
  )
  const winRate = computed(() =>
    totalDraws.value > 0 ? ((wins.value / totalDraws.value) * 100).toFixed(1) : '0.0'
  )

  const handleGameStart = () => {
    isDrawing.value = true
  }

  const handleGameEnd = (result) => {
    isDrawing.value = false
    results.value.unshift(result)
  }

  const resetStats = () => {
    results.value = []
  }

  return {
    prizes,
    results,
    isDrawing,
    totalDraws,
    wins,
    winRate,
    handleGameStart,
    handleGameEnd,
    resetStats
  }
}
```

```vue
<template>
  <GridLottery
    :prizes="prizes"
    :disabled="isDrawing"
    @game-start="handleGameStart"
    @game-end="handleGameEnd"
  />

  <div class="stats">
    <div>æŠ½å¥–æ¬¡æ•°: {{ totalDraws }}</div>
    <div>ä¸­å¥–ç‡: {{ winRate }}%</div>
    <button @click="resetStats">é‡ç½®ç»Ÿè®¡</button>
  </div>
</template>

<script setup>
import { useLottery } from '@/composables/useLottery'

const {
  prizes,
  isDrawing,
  totalDraws,
  winRate,
  handleGameStart,
  handleGameEnd,
  resetStats
} = useLottery(['å¤§å¥–', 'å°å¥–', 'è°¢è°¢å‚ä¸'])
</script>
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æƒé‡é…ç½®å»ºè®®

```vue
<script setup>
// åˆç†çš„æƒé‡åˆ†é…
const prizes = ref(['ç‰¹ç­‰å¥–', 'ä¸€ç­‰å¥–', 'äºŒç­‰å¥–', 'ä¸‰ç­‰å¥–', 'ä¼˜æƒ åˆ¸', 'ç§¯åˆ†', 'ä»£é‡‘åˆ¸', 'çº¢åŒ…', 'è°¢è°¢å‚ä¸'])
const weights = ref([1, 3, 8, 15, 20, 25, 20, 5, 3]) // æ€»å’Œä¸º100ï¼Œä¾¿äºè®¡ç®—æ¦‚ç‡
</script>
```

### 2. é”™è¯¯å¤„ç†

```vue
<template>
  <div>
    <div v-if="error" class="error">
      é”™è¯¯ï¼š{{ error }}
    </div>

    <GridLottery
      :prizes="prizes"
      :weights="weights"
      @result="handleResult"
      @error="handleError"
    />
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'

const error = ref('')
const prizes = ref(['å¥–å“1', 'å¥–å“2', 'å¥–å“3', 'è°¢è°¢å‚ä¸'])
const weights = ref([10, 10, 10, 70])

// éªŒè¯é…ç½®
const isConfigValid = computed(() => {
  return prizes.value.length === weights.value.length
})

const handleResult = (result) => {
  error.value = ''
  console.log('æŠ½å¥–æˆåŠŸ:', result)
}

const handleError = (err) => {
  error.value = err.message
  console.error('æŠ½å¥–é”™è¯¯:', err)
}
</script>

<style scoped>
.error {
  color: red;
  margin-bottom: 10px;
  padding: 10px;
  background-color: #ffe6e6;
  border-radius: 4px;
}
</style>
```

### 3. æ€§èƒ½ä¼˜åŒ–

```vue
<script setup>
import { ref, computed, shallowRef } from 'vue'

// å¯¹äºå¤§æ•°æ®é‡ä½¿ç”¨shallowRef
const largePrizes = shallowRef(
  Array.from({ length: 100 }, (_, i) => `å¥–å“${i + 1}`)
)

// ä½¿ç”¨computedç¼“å­˜è®¡ç®—ç»“æœ
const displayPrizes = computed(() =>
  largePrizes.value.slice(0, 9) // åªæ˜¾ç¤ºå‰9ä¸ª
)

// é˜²æŠ–å¤„ç†é¢‘ç¹æ›´æ–°
import { debounce } from 'lodash-es'

const debouncedUpdate = debounce((newPrizes) => {
  largePrizes.value = newPrizes
}, 300)
</script>
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæŠ½å¥–ç»“æœä¸å¤Ÿéšæœºï¼Ÿ
A: è¯·ç¡®ä¿å®‰è£…äº† `randbox` ä¾èµ–ï¼Œå®ƒæä¾›äº†é«˜è´¨é‡çš„éšæœºæ•°ç”Ÿæˆç®—æ³•ã€‚

### Q: å¦‚ä½•å®ç°å…¬å¹³çš„æŠ½å¥–ï¼Ÿ
A: ä½¿ç”¨æƒé‡é…ç½®ï¼Œç¡®ä¿æƒé‡æ€»å’Œåˆç†ï¼Œé¿å…æŸä¸ªå¥–å“æƒé‡è¿‡é«˜ã€‚

### Q: ç»„ä»¶å¤§å°å¦‚ä½•è‡ªé€‚åº”ï¼Ÿ
A: ç»„ä»¶ä¼šè‡ªåŠ¨é€‚åº”å®¹å™¨å¤§å°ï¼Œé€šè¿‡è®¾ç½®å®¹å™¨çš„å®½é«˜æ¥æ§åˆ¶ç»„ä»¶å°ºå¯¸ã€‚

### Q: å¯ä»¥ç¦ç”¨åŠ¨ç”»å—ï¼Ÿ
A: å°† `animationDuration` è®¾ç½®ä¸º 0 å¯ä»¥ç¦ç”¨åŠ¨ç”»æ•ˆæœã€‚

### Q: å¦‚ä½•ä¸Vue Routeré›†æˆï¼Ÿ
A: å¯ä»¥åœ¨è·¯ç”±ç»„ä»¶ä¸­æ­£å¸¸ä½¿ç”¨ï¼Œæˆ–è€…é€šè¿‡è·¯ç”±å‚æ•°åŠ¨æ€é…ç½®å¥–å“ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [SlotMachine - æ»šåŠ¨æŠ½å¥–](/zh/docs/vue/slot-machine)
- [ScratchCard - åˆ®åˆ®å¡](/zh/docs/vue/scratch-card)
- [DiceGame - éª°å­æ¸¸æˆ](/zh/docs/vue/dice-game)
- [RandBox æ ¸å¿ƒåº“](/zh/docs/basics)